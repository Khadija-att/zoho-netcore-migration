void automation.netcore_get_channel_partner_assigned_data(Int leadId)
{
API_ENDPOINT = "https://1unsvm1tw6.execute-api.ap-south-1.amazonaws.com/netcore/cp-update-event";
leadData = zoho.crm.getRecordById('Leads',leadId);
Channel_Partner = leadData.get('Channel_Partner');
// Channel_Partner_ID = Channel_Partner.get('id');
// info Channel_Partner_ID;
ChannelPartnerData = Map();
// ChannelPartnerData.put("cp_name",Channel_Partner.get("name"));
ChannelPartnerData.put("tag_expiry_date",ifnull(leadData.get("Tag_Expiry_Date"),"NA"));
// info Channel_Partner;
if(Channel_Partner != null)
{
	if(Channel_Partner.containKey("id"))
	{
		cpId = Channel_Partner.get("id");
		// fetch CP details only if cpId exists
		cpDetails = zoho.crm.getRecordById("Accounts",cpId);
		leadIdStr = leadId.toString();
		info cpDetails;
		if(cpDetails != null)
		{
			companyData = cpDetails.get("Company_lookup");
			ChannelPartnerData.put("Lead_Id",leadIdStr);
			ChannelPartnerData.put("cp_name",ifnull(cpDetails.get("Contact_name"),"NA"));
			ChannelPartnerData.put("cp_number",ifnull(cpDetails.get("Phone"),"NA"));
			if(companyData != null)
			{
				ChannelPartnerData.put("cp_company",ifnull(companyData.get("name"),"NA"));
			}
			else
			{
				ChannelPartnerData.put("cp_company","NA");
			}
			ChannelPartnerData.put("activity_name","lead_assigned_to_cp");
			resp = invokeurl
			[
				url :API_ENDPOINT
				type :POST
				parameters:ChannelPartnerData.toString()
				headers:{"Content-Type":"application/json"}
			];
			info "API Gateway response: " + resp;
		}
	}
}
}